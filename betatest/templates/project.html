{% extends "base.html" %}

{% block pagetitle %}Projects{% endblock %} 

{% block content %}
	
	{% if user.username == project.author.username %}
		<ul class="tabs" style="float: right;">
			<li><a href="{{ url_for('project_edit', username = project.author.username, project = project.slug) }}"><span class="icon-16 icon-16-edit"></span>Edit Project</a></li>
		</ul>
	{% endif %}

	<h1 class="project-title">{{ project.title }} 
		<span class="author">by <a href="{{ project.author.url() }}">{{ project.author.username }}</a></span>
	{% if testers %} - Testers{% endif %}</h1>
	<p>
		<div class="columns">
			{% if not testers %}
			<div class="box">
				<h4>Details</h4>
				<div class="box-content">
					<table class="details">
						<tr><th>Author</th><td><a href="{{ user.url()) }}">{{ user.username }}</a></td></tr>
						<tr><th>Created</th><td>{{ time(project.creation_date) }}</td></tr>
					</table>
				</div>
			</div>
			<div class="columns-separator"></div>
			{% endif %}
			<div class="box" style="width: 200px">
				<h4>Testers</h4>
				<ul class="userlist">
					{% set counter = 0 %}
					{% for tester in project.testers if (counter < 10 or testers) %}
					{% set counter = counter + 1 %}
					<li>
						<a href="{{ tester.url() }}">
							<div class="icon">
								<img width="16" height="16" src="{{ tester.getAvatar(16) }}" />
							</div>
							<div class="more">
								<span class="icon-16 icon-16-more"></span>
							</div>
							<div class="username">
								{{ tester.username }}
							</div>
						</a>
					</li>
					{% endfor %}
				</ul>
				
				
				{% if not testers and project.testers | length > 10 %}
					<p class="form-buttons">
						<a class="button" href="{{ url_for('project_testers', username = project.author.username, project = project.slug) }}">Show all</a>							
					</p>
				{% elif testers %}
					<p class="form-buttons">
						<a class="button default" href="{{ project.url() }}">&laquo; Back to project</a>
					</p>
				{% endif %}
			</div>
		</div>
		{% if not testers %}
		<div class="box">
			<h4>Description</h4>
			<div class="box-content markdown">
				{{ project.description | markdown }}
			</div>
		</div>
		{% endif %}
	</p>
{% endblock content %}
